(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{293:function(t,e,o){"use strict";o.r(e),o.d(e,"default",function(){return h});o(29),o(30);var n=o(0),a=o.n(n),i=o(39),c=o(33),r=o(287),s=o(288),u=o(178),l=o(4),d=o(72),p=o(5);var f=o(306),g=o(307),h=function(t){var e,n;function h(e){var o;return(o=t.call(this,e)||this).state={autocompleteOptions:[],autocompleteResults:[],dataLoaded:!1,locations:[],isLoading:!0},o}n=t,(e=h).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var m=h.prototype;return m.componentDidMount=function(){window.locationResults=void 0,window.searchProps=void 0,this.requestLocation(),this.setState({isLoading:!1}),window.locations?this.setData(window.locations):this.loadData()},m.loadData=function(){var t=this;fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSba72Al-RA3rUkBruesaJpLe8A5pIm-EJ8ZvY5SeSIzJWi8sebSnNqBTckypxCCyEhk2UaWvD_6Kfe/pub?output=csv").then(function(t){return t.text()}).then(function(e){var o=Object(c.uniqBy)(e.split("\n").slice(1).map(d.h).filter(function(t){return t}),function(t){return t.name+" "+t.latitude+" "+t.longitude});window.locations=o,t.setData(o)})},m.setData=function(t){console.log("Data loaded: "+t.length+" locations.");var e=Object(c.uniq)(t.map(function(t){return t.city+", "+t.state}));this.setState({locations:t,autocompleteOptions:e,dataLoaded:!0})},m.requestLocation=function(){var t=this;if(!navigator)return console.log("Navigator is undefined");var e=void 0!==navigator.permissions;console.log("Has permissions: "+e);var o={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},n=function(e){if(e&&e.coords){var o=e.coords,n=o.latitude,a=o.longitude;console.log("Position: "+n+", "+a),Object(d.i)(n+","+a,function(e){e&&!t.state.locationA&&t.setState({myLocation:"My Location - "+e,myLocationCoordinates:[n,a]})})}},a=function(){console.log("Getting position"),navigator.geolocation.getCurrentPosition(n,function(t){return console.log("ERR: "+t.message)},o)};e?navigator.permissions.query({name:"geolocation"}).then(function(t){"denied"!==t.state&&a()}):a()},m.reset=function(){this.setState({autocompleteResults:[],results:void 0,searchType:void 0})},m.render=function(){var t=this,e=this.state,n=e.autocompleteOptions,c=e.dataLoaded,d=e.locations,h=e.myLocation,m=e.myLocationCoordinates,b=e.searchType,v=a.a.createElement(l.r,null,a.a.createElement(l.q,null,a.a.createElement(l.p,{onClick:function(){return t.setState({searchType:"route"})}},a.a.createElement(l.h,{src:f}),a.a.createElement(l.g,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by route")),a.a.createElement(l.p,{onClick:function(){return t.setState({searchType:"destination"})}},a.a.createElement(l.h,{src:g}),a.a.createElement(l.g,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by location"))),a.a.createElement(l.g,{onClick:function(){if(d.length){var t={state:void 0,city:void 0,tag:void 0};Object(i.b)("/results",{state:{results:[],locations:d,filterBy:t}})}},style:{textAlign:"center",lineHeight:"60px",boxSizing:"border-box",width:"100%",cursor:"pointer",color:"white",margin:0,opacity:c?1:0,transition:"opacity 0.5s"}},"VIEW ALL"));if(this.state.isLoading)return a.a.createElement("div",{style:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,backgroundColor:p.a.orange}});var y=b?"url("+o(308)("./"+b+".png")+")":void 0;return a.a.createElement(l.d,{style:{backgroundColor:b?"white":p.a.orange,backgroundImage:y,backgroundPositionY:"100%"}},a.a.createElement(r.a,{title:"Home"}),a.a.createElement(s.a,{searchProps:{},reset:this.reset.bind(this),siteTitle:"Tour Food"}),b?a.a.createElement(u.a,{autocompleteOptions:n,locations:d,miniature:!1,myLocation:h,myLocationCoordinates:m,searchType:b}):v)},h}(a.a.Component)},295:function(t,e,o){t.exports=o.p+"static/about-6e08b9ea9ea8f048d2a66e08e78f153c.png"},296:function(t,e,o){t.exports=o.p+"static/contact-b34ca2d8bff9abc5a762bbae92e07fbf.png"},297:function(t,e,o){t.exports=o.p+"static/faq-7876d0d96155aeac5636dca2c595b39d.png"},306:function(t,e,o){t.exports=o.p+"static/search-by-route-b06728f0c61d271df5962decc1f415c1.png"},307:function(t,e,o){t.exports=o.p+"static/search-nearby-ba5444a805504845e5185b5e9fcfac14.png"},308:function(t,e,o){var n={"./about.png":295,"./contact.png":296,"./destination.png":309,"./faq.png":297,"./route.png":310};function a(t){var e=i(t);return o(e)}function i(t){if(!o.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id=308},309:function(t,e,o){t.exports=o.p+"static/destination-c00c844e5d0680ebc1900c8fdf98cedc.png"},310:function(t,e,o){t.exports=o.p+"static/route-0f57d1890d8c046a73a2a2ac5f34cb22.png"}}]);
//# sourceMappingURL=component---src-pages-index-js-a4ba3dc26519b73cfb49.js.map