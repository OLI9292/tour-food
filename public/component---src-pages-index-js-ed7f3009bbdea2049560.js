(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{291:function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return g}));o(39),o(29);var n=o(0),a=o.n(n),i=o(32),s=o(33),c=o(286),r=o(287),l=o(178),u=o(4),d=o(72),p=o(6);var h=o(302),m=o(303),g=function(t){var e,o;function n(e){var o;return(o=t.call(this,e)||this).state={autocompleteOptions:[],autocompleteResults:[],dataLoaded:!1,locations:[],isLoading:!0},o}o=t,(e=n).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var g=n.prototype;return g.componentDidMount=function(){this.requestLocation(),this.setState({isLoading:!1}),window.locations?this.setData(window.locations):this.loadData()},g.loadData=function(){var t=this;fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSba72Al-RA3rUkBruesaJpLe8A5pIm-EJ8ZvY5SeSIzJWi8sebSnNqBTckypxCCyEhk2UaWvD_6Kfe/pub?output=csv").then((function(t){return t.text()})).then((function(e){var o=Object(s.uniqBy)(e.split("\n").slice(1).map(d.h).filter((function(t){return t})),(function(t){return t.name+" "+t.latitude+" "+t.longitude}));window.locations=o,t.setData(o)}))},g.setData=function(t){console.log("Data loaded: "+t.length+" locations.");var e=Object(s.uniq)(t.map((function(t){return t.city+", "+t.state})));this.setState({locations:t,autocompleteOptions:e,dataLoaded:!0})},g.requestLocation=function(){var t=this;if(!navigator)return console.log("Navigator is undefined");var e=void 0!==navigator.permissions;console.log("Has permissions: "+e);var o={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},n=function(e){if(e&&e.coords){var o=e.coords,n=o.latitude,a=o.longitude;console.log("Position: "+n+", "+a),Object(d.i)(n+","+a,(function(e){e&&!t.state.locationA&&t.setState({myLocation:"My Location - "+e,myLocationCoordinates:[n,a]})}))}},a=function(){console.log("Getting position"),navigator.geolocation.getCurrentPosition(n,(function(t){return console.log("ERR: "+t.message)}),o)};e?navigator.permissions.query({name:"geolocation"}).then((function(t){"denied"!==t.state&&a()})):a()},g.reset=function(){this.setState({autocompleteResults:[],results:void 0,searchType:void 0})},g.render=function(){var t=this,e=this.state,o=e.autocompleteOptions,n=e.dataLoaded,s=e.locations,d=e.myLocation,g=e.myLocationCoordinates,f=e.searchType,y=a.a.createElement("div",{style:{height:"calc(100vh - 60px)",display:"flex",flexDirection:"column"}},a.a.createElement(u.n,null,a.a.createElement(u.m,{onClick:function(){return t.setState({searchType:"route"})}},a.a.createElement(u.g,{src:h}),a.a.createElement(u.f,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by route")),a.a.createElement(u.m,{onClick:function(){return t.setState({searchType:"destination"})}},a.a.createElement(u.g,{src:m}),a.a.createElement(u.f,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by location"))),a.a.createElement(u.f,{onClick:function(){if(s.length){var t={state:void 0,city:void 0,tag:void 0};Object(i.navigate)("/results",{state:{results:[],locations:s,filterBy:t}})}},style:{textAlign:"center",lineHeight:"60px",boxSizing:"border-box",width:"100%",cursor:"pointer",color:"white",margin:0,opacity:n?1:0,transition:"opacity 0.5s"}},"VIEW ALL"));return this.state.isLoading?a.a.createElement("div",{style:{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,backgroundColor:p.a.orange}}):a.a.createElement(u.b,{style:{backgroundColor:f?"white":p.a.orange}},a.a.createElement(c.a,{title:"Home"}),a.a.createElement(r.a,{searchProps:{},reset:this.reset.bind(this),siteTitle:"Tour Food"}),f?a.a.createElement(l.a,{autocompleteOptions:o,locations:s,miniature:!1,myLocation:d,myLocationCoordinates:g,searchType:f}):y)},n}(a.a.Component)},302:function(t,e,o){t.exports=o.p+"static/search-by-route-b06728f0c61d271df5962decc1f415c1.png"},303:function(t,e,o){t.exports=o.p+"static/search-nearby-ba5444a805504845e5185b5e9fcfac14.png"}}]);
//# sourceMappingURL=component---src-pages-index-js-ed7f3009bbdea2049560.js.map