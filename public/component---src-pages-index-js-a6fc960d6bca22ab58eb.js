(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{291:function(t,e,o){"use strict";o.r(e),o.d(e,"default",function(){return y});o(30),o(29);var a=o(0),n=o.n(a),i=o(39),r=o(33),c=o(285),s=o(286),l=o(177),u=o(301),p=o.n(u),d=o(302),h=o.n(d),m=o(4),f=o(72),g=o(6);var y=function(t){var e,o;function a(e){var o;return(o=t.call(this,e)||this).state={autocompleteOptions:[],autocompleteResults:[],dataLoaded:!1,locations:[]},o}o=t,(e=a).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var u=a.prototype;return u.componentDidMount=function(){this.requestLocation(),window.locations?this.setData(window.locations):this.loadData()},u.loadData=function(){var t=this;fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSba72Al-RA3rUkBruesaJpLe8A5pIm-EJ8ZvY5SeSIzJWi8sebSnNqBTckypxCCyEhk2UaWvD_6Kfe/pub?output=csv").then(function(t){return t.text()}).then(function(e){var o=Object(r.uniqBy)(e.split("\n").slice(1).map(f.h).filter(function(t){return t}),function(t){return t.name+" "+t.latitude+" "+t.longitude});window.locations=o,t.setData(o)})},u.setData=function(t){console.log("Data loaded: "+t.length+" locations.");var e=Object(r.uniq)(t.map(function(t){return t.city+", "+t.state}));this.setState({locations:t,autocompleteOptions:e,dataLoaded:!0})},u.requestLocation=function(){var t=this;if(navigator){var e=void 0!==navigator.permissions,o={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},a=function(e){if(e&&e.coords){var o=e.coords,a=o.latitude,n=o.longitude;Object(f.i)(a+","+n,function(e){e&&!t.state.locationA&&t.setState({myLocation:"My Location - "+e})})}},n=function(){return navigator.geolocation.getCurrentPosition(a,function(t){return console.log("ERR: "+t.message)},o)};e?navigator.permissions.query({name:"geolocation"}).then(function(t){"denied"===!t.state&&n()}):n()}},u.reset=function(){this.setState({autocompleteResults:[],results:void 0,searchType:void 0})},u.render=function(){var t=this,e=this.state,o=e.autocompleteOptions,a=e.dataLoaded,r=e.locations,u=e.myLocation,d=e.searchType,f=n.a.createElement("div",{style:{height:"calc(100vh - 60px)",display:"flex",flexDirection:"column"}},n.a.createElement(m.m,null,n.a.createElement(m.l,{onClick:function(){return t.setState({searchType:"route"})}},n.a.createElement(m.g,{src:p.a}),n.a.createElement(m.f,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by route")),n.a.createElement(m.l,{onClick:function(){return t.setState({searchType:"destination"})}},n.a.createElement(m.g,{src:h.a}),n.a.createElement(m.f,{style:{margin:0,lineHeight:"40px"},color:"white"},"search by location"))),n.a.createElement(m.f,{onClick:function(){if(r.length){var t={state:void 0,city:void 0,tag:void 0};Object(i.b)("/results",{state:{results:[],locations:r,filterBy:t}})}},style:{textAlign:"center",lineHeight:"60px",boxSizing:"border-box",width:"100%",cursor:"pointer",color:"white",margin:0,opacity:a?1:0,transition:"opacity 0.5s"}},"VIEW ALL"));return n.a.createElement(m.b,{style:{backgroundColor:d?"white":g.a.orange}},n.a.createElement(c.a,{title:"Home"}),n.a.createElement(s.a,{searchProps:{},reset:this.reset.bind(this),siteTitle:"Tour Food"}),d?n.a.createElement(l.a,{autocompleteOptions:o,locations:r,miniature:!1,myLocation:u,searchType:d}):f)},a}(n.a.Component)},301:function(t,e,o){t.exports=o.p+"static/search-by-route-0d45664a9f2e6d650d2b60208872e728.jpg"},302:function(t,e,o){t.exports=o.p+"static/search-nearby-c11fabd696436a266b4063971ea6cfad.jpg"}}]);
//# sourceMappingURL=component---src-pages-index-js-a6fc960d6bca22ab58eb.js.map