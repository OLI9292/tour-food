(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{158:function(t,n,e){"use strict";e.r(n);var r=e(167),a=e.n(r),i=(e(170),e(172),e(96),e(64),e(41),e(247),e(8)),o=e.n(i),c=e(0),l=e.n(c),u=e(169),s=e(249),d=e.n(s),p=e(268),f=e(178),g=e(180),m=e(168),h=function(t){function n(){return t.apply(this,arguments)||this}return o()(n,t),n.prototype.render=function(){var t=this.props.name;return l.a.createElement("div",null,t)},n}(c.Component),x=e(163),y=e(182),b=e(271),v=e.n(b);function w(){var t=a()(["\n  max-width: 750px;\n  margin: 0 auto;\n  margin-top: 40px;\n  margin-bottom: 40px;\n"]);return w=function(){return t},t}function E(){var t=a()(["\n  height: calc(100% - 53px);\n  text-align: center;\n  display: flex;\n  padding: 0 10px;\n  flex-direction: column;\n  object-fit: contain;\n"]);return E=function(){return t},t}function k(){var t=a()(["\n  width: 100%;\n  margin: 0 auto;\n  overflow: scroll;\n  -ms-overflow-style: none;\n  width: 100vw;\n  margin-left: -10px;\n  padding: 0 10px;\n  box-sizing: border-box;\n"]);return k=function(){return t},t}e.d(n,"default",function(){return O});var O=function(t){function n(n){var e,r,a=[],i=[],o=(e=t.call(this,n)||this).props.location;return o.state&&(a=o.state.results,r=o.state.description,i=o.state.locations,a.length||(a=i.map(function(t){return{location:t}}))),e.state={displayMap:!1,results:a,locations:i,filterOptions:{state:Object(y.f)(i,"state"),city:Object(y.f)(i,"city"),tag:Object(y.f)(i,"tags")},filterBy:{state:void 0,city:void 0,tag:void 0},description:r},e}o()(n,t);var e=n.prototype;return e.filter=function(t,n){var e=this.state.locations,r={};r[t]=n;var a=e.filter(function(t){return Object.keys(r).every(function(n){return!r[n]||("tag"===n?t.tags.indexOf(r[n])>-1:r[n]===t[n])})}).map(function(t){return{location:t}}),i=a.length+" result"+(1===a.length?"":"s")+" ";r.tag&&(i+="for "+r.tag),r.state&&(i+="in "+r.state),r.city&&(i+="in "+r.city),this.setState({description:i,results:a,filterBy:r})},e.render=function(){var t=this,n=this.state,e=n.results,r=n.description,a=n.displayMap,i=n.filterOptions,o=n.filterBy,c=Object(y.d)(e),u=Object(p.fitBounds)(c,{width:640,height:380}),s=u.center,b=u.zoom,w=e.length?l.a.createElement(m.b,{style:{borderBottom:"3px solid "+x.a.blue,padding:"8px 0",width:"100vw",marginLeft:"-10px",cursor:"pointer"},onClick:function(){return t.setState({displayMap:!0})}},l.a.createElement("img",{style:{height:"35px",width:"35px",marginRight:"5px"},src:v.a,alt:"search by route"}),l.a.createElement(m.k,{small:!0},"View on Map")):null,E=e.length?l.a.createElement("div",{style:{height:"50%",width:"100vw",marginLeft:"-10px"}},l.a.createElement(d.a,{disableDefaultUI:!0,bootstrapURLKeys:{key:{}.GATSBY_GOOGLE_API_KEY},center:s,zoom:b},e.map(function(t){return l.a.createElement(h,{key:t.location.name,lat:t.location.latitude,lng:t.location.longitude,name:t.location.name})}))):null;return l.a.createElement(m.a,null,l.a.createElement(g.a,{showFilters:!0,filterBy:o,filter:this.filter.bind(this),filterOptions:i,siteTitle:"Tour Food"}),l.a.createElement(f.a,{title:"Home"}),l.a.createElement(M,null,a?E:w,r&&l.a.createElement(m.k,{small:!0,style:{textAlign:"center",padding:"8px 0",width:"100vw",marginLeft:"-10px",color:"white",backgroundColor:x.a.blue}},r),l.a.createElement(j,null,(e||[]).map(function(t,n){return l.a.createElement(S,{key:n},l.a.createElement(m.b,{style:{justifyContent:"space-between",alignItems:"flex-start"}},l.a.createElement("div",{style:{textAlign:"left"}},l.a.createElement("a",{target:"_blank",href:t.location.url},l.a.createElement(m.k,{color:x.a.blue,large:!0,style:{display:"inline-block",marginRight:"10px"}},t.location.name)),l.a.createElement(m.k,{extraSmall:!0,style:{display:"inline-block"}},t.location.city,", ",t.location.state)),void 0!==t.distance&&l.a.createElement(m.k,{style:{marginLeft:"20px"},color:x.a.orange},Math.round(10*t.distance)/10,"m")),t.location.tags.length&&l.a.createElement(m.k,{color:x.a.orange,extraSmall:!0,style:{textAlign:"left"}},t.location.tags.sort().join(", ")),t.location.comments&&l.a.createElement(m.k,{small:!0,color:x.a.darkGray,style:{textAlign:"left",fontWeight:600,marginTop:"5px"}},t.location.comments))}))))},n}(l.a.Component),j=u.a.div(k()),M=u.a.div(E()),S=u.a.div(w())},163:function(t,n,e){"use strict";n.a={blue:"#157EFB",orange:"#FB6320",gray:"#696969",lightGray:"#ccc",darkGray:"#484848",red:"#C80004"}},166:function(t,n,e){var r;t.exports=(r=e(177))&&r.default||r},168:function(t,n,e){"use strict";e.d(n,"b",function(){return y}),e.d(n,"k",function(){return b}),e.d(n,"a",function(){return v}),e.d(n,"e",function(){return w}),e.d(n,"i",function(){return E}),e.d(n,"h",function(){return k}),e.d(n,"f",function(){return O}),e.d(n,"g",function(){return j}),e.d(n,"d",function(){return M}),e.d(n,"j",function(){return S}),e.d(n,"c",function(){return F});e(189);var r=e(167),a=e.n(r),i=e(169),o=e(163);function c(){var t=a()(["\n  text-align: center;\n  max-width: 300px;\n  margin: 0 auto;\n"]);return c=function(){return t},t}function l(){var t=a()(["\n  -webkit-appearance: none;\n  background-color: ",";\n  color: white;\n  text-transform: uppercase;\n  text-align: center;\n  cursor: pointer;\n  outline: 0;\n  border: 0;\n  border-radius: 10px;\n  padding: 10px 0;\n  font-size: 1.3em;\n  letter-spacing: 1px;\n  font-weight: 700;\n  margin: 0 auto;\n  width: 100%;\n  display: block;\n  margin-top: 25px;\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.13), 0 3px 3px rgba(0, 0, 0, 0.17);\n"]);return l=function(){return t},t}function u(){var t=a()(["\n  background-color: ",";\n  transition: background-color 0.15s ease;\n  height: 4px;\n  border-radius: 5px;\n  width: 100%;\n"]);return u=function(){return t},t}function s(){var t=a()(["\n  outline: 0;\n  margin: 0 auto;\n  border: 0;\n  ::placeholder {\n    color: ",";\n  }\n  font-weight: 600;\n  font-size: 1.3em;\n  letter-spacing: 1px;\n  display: block;\n"]);return s=function(){return t},t}function d(){var t=a()(["\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  flex: 1;\n"]);return d=function(){return t},t}function p(){var t=a()(["\n  flex: 7;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n"]);return p=function(){return t},t}function f(){var t=a()(["\n  height: calc(100% - 150px);\n  text-align: center;\n  padding: 20px 0 0 0;\n  display: flex;\n  flex-direction: column;\n  object-fit: contain;\n  box-sizing: border-box;\n"]);return f=function(){return t},t}function g(){var t=a()(["\n  color: ",";\n  text-transform: uppercase;\n  margin: 10px 5px;\n"]);return g=function(){return t},t}function m(){var t=a()(["\n  height: 100vh;\n  width: 100vw;\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n"]);return m=function(){return t},t}function h(){var t=a()(["\n  margin: 0;\n  color: ",";\n  font-size: ","em;\n"]);return h=function(){return t},t}function x(){var t=a()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return x=function(){return t},t}var y=i.a.div(x()),b=i.a.p(h(),function(t){return t.color||o.a.gray},function(t){return t.large?1.4:t.small?1:t.extraSmall?.8:1.2}),v=i.a.div(m()),w=i.a.h2(g(),function(t){return t.color}),E=i.a.div(f()),k=i.a.div(p()),O=i.a.div(d()),j=i.a.input(s(),o.a.lightGray),M=i.a.div(u(),function(t){return t.glow?o.a.red:o.a.gray}),S=i.a.input(l(),function(t){return t.color}),F=i.a.form(c())},171:function(t,n,e){"use strict";var r=e(0),a=e.n(r),i=e(5),o=e.n(i),c=e(40),l=e.n(c);e.d(n,"a",function(){return l.a}),e.d(n,"b",function(){return c.navigate});e(166),a.a.createContext({});o.a.object,o.a.string.isRequired,o.a.func,o.a.func},177:function(t,n,e){"use strict";e.r(n);e(42);var r=e(0),a=e.n(r),i=e(5),o=e.n(i),c=e(68),l=function(t){var n=t.location,e=t.pageResources;return e?a.a.createElement(c.a,Object.assign({location:n,pageResources:e},e.json)):null};l.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},n.default=l},178:function(t,n,e){"use strict";var r=e(179),a=e(0),i=e.n(a),o=e(5),c=e.n(o),l=e(186),u=e.n(l);function s(t){var n=t.description,e=t.lang,a=t.meta,o=t.title,c=r.data.site,l=n||c.siteMetadata.description;return i.a.createElement(u.a,{htmlAttributes:{lang:e},title:o,titleTemplate:"%s | "+c.siteMetadata.title,meta:[{name:"description",content:l},{property:"og:title",content:o},{property:"og:description",content:l},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:c.siteMetadata.author},{name:"twitter:title",content:o},{name:"twitter:description",content:l}].concat(a)})}s.defaultProps={lang:"en",meta:[],description:""},s.propTypes={description:c.a.string,lang:c.a.string,meta:c.a.arrayOf(c.a.object),title:c.a.string.isRequired},n.a=s},179:function(t){t.exports={data:{site:{siteMetadata:{title:"Tour Food",description:"Good places for food and drink on tour!",author:"Oliver Plunkett"}}}}},180:function(t,n,e){"use strict";e.d(n,"a",function(){return E});var r=e(167),a=e.n(r),i=e(8),o=e.n(i),c=e(0),l=e.n(c),u=e(169),s=e(171),d=(e(188),e(168)),p=e(181),f=e.n(p),g=e(163);function m(){var t=a()(["\n  position: absolute;\n  background-color: white;\n  padding: 10px;\n  box-sizing: border-box;\n  border: 3px solid ",";\n  font-weight: 400;\n  top: 50px;\n  left: 0;\n  width: 100%;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, 90px);\n  grid-gap: 4px 15px;\n  z-index: 100;\n  @media (max-width: 600px) {\n    padding: 0px;\n    grid-template-columns: 1fr;\n    overflow: scroll;\n    max-height: calc(100% - 50px);\n    border-width: 3px 0;\n    width: 100vw;\n    left: 0;\n  }\n"]);return m=function(){return t},t}function h(){var t=a()(["\n  &:hover {\n    color: ",";\n  }\n  transition: color 0.15s ease;\n"]);return h=function(){return t},t}function x(){var t=a()(["\n  @media (max-width: 600px) {\n    border-bottom: 0.5px solid ",";\n    padding: 10px;\n    cursor: pointer;\n  }\n"]);return x=function(){return t},t}function y(){var t=a()(["\n  justify-content: center;\n  flex-grow: 1;\n  cursor: pointer;\n  position: relative;\n  height: 100%;\n  @media (max-width: 600px) {\n    position: static;\n  }\n"]);return y=function(){return t},t}function b(){var t=a()(["\n  border-color: "," transparent;\n  transition: border-color 0.15s ease;\n  border-style: solid;\n  border-width: 10px 8px 0px 8px;\n  height: 0px;\n  width: 0px;\n"]);return b=function(){return t},t}function v(){var t=a()(["\n  margin-right: 5px;\n  transition: color 0.15s ease;\n"]);return v=function(){return t},t}function w(){var t=a()(["\n  height: 50px;\n  width: 100%;\n  border-bottom: 3px solid ",";\n  display: flex;\n  align-items: center;\n"]);return w=function(){return t},t}var E=function(t){function n(n){var e;return(e=t.call(this,n)||this).state={},e}return o()(n,t),n.prototype.render=function(){var t=this,n=this.props,e=n.showFilters,r=n.filterOptions,a=n.filterBy,i=n.reset,o=this.state.displayOptionsFor,c=function(t){return o===t||a[t]?g.a.orange:g.a.blue},u=function(n){return l.a.createElement(R,null,r[n].map(function(e,r){return l.a.createElement(S,{key:r,onClick:function(){t.setState({displayOptionsFor:void 0}),t.props.filter(n,e)}},l.a.createElement(F,{color:"black",extraSmall:!0},e))}))};return l.a.createElement(k,null,l.a.createElement(s.a,{to:"/"},l.a.createElement(d.b,{onClick:function(){i&&i()},style:{width:"50px",height:"50px",borderRight:"3px solid "+g.a.blue}},l.a.createElement("img",{alt:"tour food",style:{width:"100%",height:"auto",cursor:"pointer"},src:f.a}))),e&&l.a.createElement(d.b,{style:{flexGrow:1,justifyContent:"space-around",height:"100%"}},l.a.createElement(M,{onMouseOver:function(){return t.setState({displayOptionsFor:"state"})},onMouseLeave:function(){return t.setState({displayOptionsFor:void 0})}},l.a.createElement(O,{color:c("state")},a.state||"State"),l.a.createElement(j,{color:c("state")}),"state"===o&&u("state")),l.a.createElement(M,{onMouseOver:function(){return t.setState({displayOptionsFor:"city"})},onMouseLeave:function(){return t.setState({displayOptionsFor:void 0})},style:{borderRight:"1px solid "+g.a.gray,borderLeft:"1px solid "+g.a.gray}},l.a.createElement(O,{color:c("city")},a.city||"City"),l.a.createElement(j,{color:c("city")}),"city"===o&&u("city")),l.a.createElement(M,{onMouseOver:function(){return t.setState({displayOptionsFor:"tag"})},onMouseLeave:function(){return t.setState({displayOptionsFor:void 0})}},l.a.createElement(O,{color:c("tag")},a.tag||"Tag"),l.a.createElement(j,{color:c("tag")}),"tag"===o&&u("tag"))))},n}(l.a.Component),k=u.a.header(w(),g.a.blue),O=Object(u.a)(d.k)(v()),j=u.a.div(b(),function(t){return t.color}),M=Object(u.a)(d.b)(y()),S=u.a.div(x(),g.a.lightGray),F=Object(u.a)(d.k)(h(),g.a.orange),R=u.a.div(m(),g.a.blue)},181:function(t,n,e){t.exports=e.p+"static/icon-049aeb0a5ee5652f7294bca1dd91a9de.png"},182:function(t,n,e){"use strict";e.d(n,"e",function(){return i}),e.d(n,"c",function(){return o}),e.d(n,"d",function(){return c}),e.d(n,"f",function(){return l}),e.d(n,"b",function(){return u}),e.d(n,"a",function(){return s});e(96),e(64),e(41),e(100),e(99),e(190),e(170),e(65),e(172),e(97),e(98),e(95);var r=e(191),a="&key="+{}.GATSBY_GOOGLE_API_KEY,i=function(t){try{var n=function(t){return t.trim().split(/,(?=(?:(?:[^"]*(?:")){2})*[^"]*$)/).map(function(t){return(t=t.trim()).startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t})}(t),e={name:n[0],city:n[1],state:n[2],tags:n[4].split(",").map(function(t){return t.trim()}),comments:n[5],latitude:parseFloat(n[8],10),longitude:parseFloat(n[9],10),url:n[10]};return e.name&&e.city&&e.state&&e.latitude&&e.longitude?e:void console.log("ERR: failed to parse\n",t,"\n",e,"\n")}catch(r){console.log("ERR: failed to parse "+t)}},o=function(t,n){return fetch("https://maps.googleapis.com/maps/api/geocode/json?address="+t+a).then(function(t){return t.json()}).then(function(e){try{var r=e.results[0],a=r.geometry.location,i=a.lat,o=a.lng,c=r.formatted_address.replace(", USA","");n(i,o,c)}catch(l){n(null,null,null,"Could not find "+t+".")}})},c=function(t){var n=t.map(function(t){return t.location.latitude}),e=t.map(function(t){return t.location.longitude}),r=Math.max.apply(Math,n),a=Math.min.apply(Math,n),i=Math.max.apply(Math,e);return{nw:{lat:r,lng:Math.min.apply(Math,e)},se:{lat:a,lng:i}}},l=function(t,n){var e,r="tags"===n?(e=[]).concat.apply(e,t.map(function(t){return t[n]})):t.map(function(t){return t[n]});return Array.from(new Set(r)).filter(function(t){return t}).sort()},u=function(t,n,e,a){return r.getDistance({latitude:t,longitude:n},{latitude:e,longitude:a})/1609.344},s=function(t,n,e,a,i,o){return r.getDistanceFromLine({latitude:t,longitude:n},{latitude:e,longitude:a},{latitude:i,longitude:o})/1609.344}},271:function(t,n,e){t.exports=e.p+"static/search-by-route-square-9b6ed76a947dbebcb1f4cff57ebbd941.png"}}]);
//# sourceMappingURL=component---src-pages-results-js-fd6b0e34c12a32194d0f.js.map